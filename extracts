##Install Kraken2 client using
mamba create -n kraken2 -c conda-forge -c epi2melabs kraken2-server ##or
conda create -n kraken2 -c conda-forge -c epi2melabs kraken2-server

##Running the classifier from remote server
conda activate kraken2
kraken2_client --host-ip dan@10.18.0.25 --sequence <sequence file> --report <report output destination + filename > kraken_output.kraken

##for running in loop
ls *.fastq.gz | while read -r line ; do kraken2_client --host-ip dan@10.18.0.25 --sequence $line --report $line.report > $line.kraken ; done

ls *_1.fastq.gz | while read -r line ; do
  # Get the corresponding R2 file
  pair=${line/_1.fastq.gz/_2.fastq.gz}
  
  # Run Kraken2 with both R1 and R2 files
  kraken2_client --host-ip dan@10.18.0.25 \
                 --sequence "$line" --sequence2 "$pair" \
                 --report "$line.report" > "$line.kraken"
done
